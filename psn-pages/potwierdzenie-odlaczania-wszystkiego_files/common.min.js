function addInlineAlert(a){$(".messageTarget").each(function(){$(this).after('<div id="tout" class="greenTout smallTout"><div id="toutIcon"></div><div id="toutDiv" class="toutInner"><label id="toutLabel" class="toutRow">'+a+"</label></div></div>")})}function addInlineInfoAlert(a){$("#errorDiv").after('<div id="tout" class="blueTout smallTout"><div id="toutIcon"></div><div id="toutDiv" class="toutInner"><label id="toutLabel" class="toutRow">'+a+"</label></div></div>")}
function addInlineError(a,b){var c=!1,d=!1,e=!1;"object"==typeof b&&(b=b.toString());"creditCard_expireMonthField"==a&&$("#creditCard_expireMonthField").addClass("selectError");"creditCard_expireYearField"==a&&$("#creditCard_expireYearField").addClass("selectError");$("#creditCard_expireMonthField").hasClass("selectError")&&$("#creditCard_expireYearField").hasClass("selectError")&&($("#creditCard_expireMonthField").removeClass("selectError"),$("#creditCard_expireYearField").removeClass("selectError"));
"creditCard_startMonthField"==a&&$("#creditCard_startMonthField").addClass("selectError");"creditCard_startYearField"==a&&$("#creditCard_startYearField").addClass("selectError");$("#creditCard_startMonthField").hasClass("selectError")&&$("#creditCard_startYearField").hasClass("selectError")&&($("#creditCard_startMonthField").removeClass("selectError"),$("#creditCard_startYearField").removeClass("selectError"));if("creditCard_expireMonthField"==a||"creditCard_expireYearField"==a)if(a="dropDownGroupExpire",
""!=$("#creditCard_expireMonthFieldError").text()||""!=$("#creditCard_expireYearFieldError").text())d=!0;if("creditCard_startMonthField"==a||"creditCard_startYearField"==a)if(a="dropDownGroupStart",""!=$("#creditCard_startMonthFieldError").text()||""!=$("#creditCard_startYearFieldError").text())c=!0;if("account_dobField"==a||"account_mobField"==a||"account_yobField"==a)if("account_mobField"==a&&$("#monthDropDown").addClass("selectError"),"account_dobField"==a&&$("#dayDropDown").addClass("selectError"),
"account_yobField"==a&&$("#yearDropDown").addClass("selectError"),a="dropDownGroup",$("#dayDropDown").hasClass("selectError")&&$("#monthDropDown").hasClass("selectError")&&$("#yearDropDown").hasClass("selectError")&&($("#dayDropDown").removeClass("selectError"),$("#monthDropDown").removeClass("selectError"),$("#yearDropDown").removeClass("selectError"),b="invalidBirthday"==b?errorMappings.DOBError3.msg:errorMappings.DOBError1.msg,$("#dropDownGroupError").remove()),""!=$("#account_dobFieldError").text()||
""!=$("#account_mobField").text()||""!=$("#account_yobField").text())e=!0;""!=$("#"+a+"Error").toString()&&$("#"+a+"Error").text()==b&&$("#"+a+"Error").remove();"dropDownGroupExpire"==a&&1==$("#dropDownGroupExpireError").length&&(d=!0);"dropDownGroupStart"==a&&1==$("#dropDownGroupStartError").length&&(c=!0);"dropDownGroup"==a&&1==$("#dropDownGroupError").length&&(e=!0);if(0==d&&0==c||1==d&&0==c||0==d&&1==c&&0==e)"startField"==a||"endField"==a?($("."+a).after('<label id="'+a+'Error" class="inlineErrorRow">'+
b+"</label>"),$("#closedFilterSection").css("display","none"),$("#openFilterSection").css("display","block")):($("#"+a).after('<label id="'+a+'Error" class="inlineErrorRow" style="display:none;">'+b+"</label>"),$("#"+a+"Error").slideDown("slow"));"undefined"!=typeof passwordStrengthMappings&&b==passwordStrengthMappings.NotAllowed.msg&&PasswordStrengthMeter.updateState("notValid");$("#"+a).length||addInlineActionError("errorDiv",b)}
function addInlineActionError(a,b){""!=$("#"+a+"MsgDiv").toString()&&$("#"+a+"MsgDiv").parent().remove();$("#"+a).show();$("#"+a).prepend('<div id="tout" class="redTout smallTout"><div id="toutIcon"></div><div id="'+a+'MsgDiv" class="toutInner"><label id="'+a+'Message" class="toutRow">'+b+"</label></div></div>")}function addLiveInlineActionError(a,b){addInlineActionError(a,b)}
function phoneNumberFormatAjax(a){$.ajax({type:"POST",url:"/util/phone-number-format.action?struts.enableJSONValidation=true&phoneNumber="+encodeURIComponent(a),success:function(a){a=jQuery.parseJSON(JSON.stringify(a));$("#creditCard_phoneNumberFormat").val(a.text)}})}
function formatCPFNumber(a){3==a.length?(a=a.substring(0,3)+".",$("#creditCard_cpfNumberFormat").val(a)):7==a.length?(a=a.substring(0,7)+".",$("#creditCard_cpfNumberFormat").val(a)):11==a.length&&(a=-1===a.indexOf(".")?a.substring(0,3)+"."+a.substring(3,6)+"."+a.substring(6,9)+"-"+a.substring(9):a.substring(0,12)+"-",$("#creditCard_cpfNumberFormat").val(a))}
$(document).ready(function(){$("#creditCard_cardNumberField").change(function(){var a=$(this).val();""==a&&(a=-1);15!=$(this).val().length&&16!=$(this).val().length||$.ajax({type:"POST",url:"/util/credit-card-auto-detect.action",data:"struts.enableJSONValidation=true&ccNumber="+$(this).val(),success:function(a){if("NO_MATCH"!=a.creditCardType){var c=$("#"+a.creditCardType+"_Description").val();$("#creditCard_Type_Field").val(a.creditCardType);$("#creditCard_Type_Field").attr("disabled","disabled");
$("#creditCard_Type_Field").addClass("shortWidthForEditLink");$("#creditCard_Type_Field").css("color","#545454");$("#editPaymentTypeLink").removeClass("hiddenImportant");$("#hiddenPaymentMethod").removeAttr("disabled");$("#hiddenPaymentMethod").val(a.creditCardType);$("#creditCard_Text_Field").removeClass("hiddenImportant");$("#creditCard_Type_Field").addClass("hiddenImportant");$("#creditCard_Type_Field").attr("disabled","disabled");$("#creditCard_Text_Field").val(c);displayMaetroSoloInputs(!1);
"AMEX"==a.creditCardType?($("#creditCard_securityCode").val(""),$("#creditCard_securityCode").attr("maxlength","4")):($("#creditCard_securityCode").val(""),$("#creditCard_securityCode").attr("maxlength","3"))}else $("#creditCard_Type_Field").removeAttr("disabled"),$("#creditCard_Type_Field").removeClass("shortWidthForEditLink"),$("#creditCard_Text_Field").addClass("hiddenImportant"),$("#creditCard_Type_Field").removeClass("hiddenImportant"),$("#creditCard_Type_Field").val(""),$("#creditCard_Type_Field").css("color",
"#A9A9A9"),$("#editPaymentTypeLink").addClass("hiddenImportant"),$("#hiddenPaymentMethod").attr("disabled","disabled"),displayMaetroSoloInputs(!1)}})});$("#creditCard_cardNumberField").keyup(function(){var a=$(this).val();""==a&&(a=-1);4>=$(this).val().length&&$.ajax({type:"POST",url:"/util/credit-card-auto-detect.action",data:"struts.enableJSONValidation=true&ccNumber="+$(this).val(),success:function(a){if("NO_MATCH"!=a.creditCardType){var c=$("#"+a.creditCardType+"_Description").val();$("#creditCard_Type_Field").val(a.creditCardType);
$("#creditCard_Type_Field").attr("disabled","disabled");$("#creditCard_Type_Field").addClass("shortWidthForEditLink");$("#creditCard_Type_Field").css("color","#545454");$("#editPaymentTypeLink").removeClass("hiddenImportant");$("#hiddenPaymentMethod").removeAttr("disabled");$("#hiddenPaymentMethod").val(a.creditCardType);$("#creditCard_Text_Field").removeClass("hiddenImportant");$("#creditCard_Type_Field").addClass("hiddenImportant");$("#creditCard_Type_Field").attr("disabled","disabled");$("#creditCard_Text_Field").val(c);
displayMaetroSoloInputs(!1);"AMEX"==a.creditCardType?($("#creditCard_securityCode").val(""),$("#creditCard_securityCode").attr("maxlength","4")):($("#creditCard_securityCode").val(""),$("#creditCard_securityCode").attr("maxlength","3"))}else $("#creditCard_Type_Field").removeClass("hiddenImportant"),$("#creditCard_Text_Field").addClass("hiddenImportant"),$("#creditCard_Type_Field").removeAttr("disabled"),$("#creditCard_Type_Field").removeClass("shortWidthForEditLink"),$("#creditCard_Type_Field").val(""),
$("#creditCard_Type_Field").css("color","#A9A9A9"),$("#editPaymentTypeLink").addClass("hiddenImportant"),$("#hiddenPaymentMethod").attr("disabled","disabled"),displayMaetroSoloInputs(!1)}})});$("#creditCard_phoneNumberFormat").change(function(){var a=$("#creditCard_phoneNumberFormat").val(),a=a.replace(/[^0-9]/g,"");phoneNumberFormatAjax(a)});$("#editPaymentTypeLink").click(function(){$("#creditCard_Type_Field").removeAttr("disabled");$("#creditCard_Type_Field").removeClass("hiddenImportant");$("#creditCard_Text_Field").addClass("hiddenImportant");
$("#creditCard_Type_Field").removeClass("shortWidthForEditLink");$("#creditCard_Type_Field").css("color","#000000");$(this).addClass("hiddenImportant");$("#hiddenPaymentMethod").attr("disabled","disabled")});""!=$("#creditCard_Type_Field").val()&&($("#creditCard_Type_Field").attr("disabled","disabled"),$("#creditCard_Type_Field").addClass("shortWidthForEditLink"),$("#editPaymentTypeLink").removeClass("hiddenImportant"),$("#creditCard_Text_Field").removeClass("hiddenImportant"),$("#creditCard_Type_Field").addClass("hiddenImportant"),
$("#hiddenPaymentMethod").removeAttr("disabled"),$("#hiddenPaymentMethod").val($("#creditCard_Type_Field").val()));$(".restartSubscriptionButton").live("click",function(){var a=$(this).parent().parent().attr("id").substring(16);$("#ajaxLoader"+a).removeClass("hidden");$("#restartSubscriptionButtonWrapper"+a).hide();$.ajax({type:"POST",url:"/cam/media/detail/renew-subscription.action?struts.enableJSONValidation=true&timestamp="+new Date,data:$(this).parent().parent().serialize(),success:function(b){var c=
jQuery.parseJSON(JSON.stringify(b));"false"==c.cancelled.toString()&&void 0==c.actionErrors&&($("#ajaxLoader"+a).addClass("hidden"),$("#statusInUse"+a).show(),$("#statusInUseNoAuto"+a).hide(),$("#cancelSubscriptionButtonWrapper"+a).show(),b=$("#cycleDateStrong"+a).html(),$("#renewalDateStrong"+a).html(b));b=$("input[name$='struts.token']");$(b).each(function(a){$(this).attr("value",c.token)})}})});$(".cancelSubscriptionButton").live("click",function(){var a=$(this).parent().parent().attr("id").substr(16);
$("#ajaxLoader"+a).removeClass("hidden");$("#cancelSubscriptionButtonWrapper"+a).hide();$.ajax({type:"POST",url:"/cam/media/detail/cancel-subscription.action?struts.enableJSONValidation=true&timestamp="+new Date,data:$(this).parent().parent().serialize(),success:function(b){var c=jQuery.parseJSON(JSON.stringify(b));"true"==c.cancelled.toString()&&void 0==c.actionErrors&&($("#ajaxLoader"+a).addClass("hidden"),$("#statusInUse"+a).hide(),$("#statusInUseNoAuto"+a).show(),$("#restartSubscriptionButtonWrapper"+
a).show(),$("#renewalDateStrong"+a).html("-"));b=$("input[name$='struts.token']");$(b).each(function(a){$(this).attr("value",c.token)})}})});$("#mainRegistrationForm #createAccountButton").click(function(){$(this).unbind("click");$(this).attr("disabled","disabled");$("#mainRegistrationForm").submit()})});
function formatCurrencyAJAX(a,b){$.ajax({type:"GET",url:"/util/currency-format.action?struts.enableJSONValidation=true&amount="+encodeURIComponent(a),success:function(a){a=jQuery.parseJSON(JSON.stringify(a));$("#"+b).text(a.text)}})}function validatePostalCode(a,b,c,d,e){return 0<a.length&&a.length<e||a.length>e||isNaN(a)?(void 0!=$("#"+b+"Error")&&$("#"+b+"Error").remove(),addInlineError(b,d),$("#lookupBoxDiv").insertAfter(c),!1):!0}
function lookupPostalCodesAJAX(a,b,c,d,e){$.ajax({type:"GET",url:d+"/cam/account/profile/lookup-address-from-postal-code.action?struts.enableJSONValidation=true&address.zipCode="+encodeURIComponent(a),success:function(a){var d=jQuery.parseJSON(JSON.stringify(a));void 0!=$("#"+b+"Error")&&$("#"+b+"Error").remove();if(void 0!=d.fieldErrors)addInlineError(b,e?e:d.fieldErrors["address.zipCode"]),$("#lookupBoxDiv").insertAfter(c);else{a=d.address.address1;var g=d.address.city,h=d.address.province,d=d.address.zipCode;
$("#address_address1Field_input").val(a);$("#address_cityField_input").val(g);$("#address_provinceField_input").val(h);$("#address_zipCodeField_input").val(d);$("#creditCard_address_address1Field_input").val(a);$("#creditCard_address_cityField_input").val(g);$("#creditCard_address_provinceField_input").val(h);$("#creditCard_address_zipCodeField_input").val(d)}}})}
function validateLoginNameAJAX(a,b,c,d,e){a=encodeURIComponent(a);""!=a.toString()&&$.ajax({type:"POST",url:(e&&""!=e?"/"+e:"")+"/reg/account/validate-login-name.action",data:"struts.enableJSONValidation=true&loginName="+a+"&context="+encodeURIComponent(c)+"&isExternal="+d,cache:!1,success:function(a){a=jQuery.parseJSON(JSON.stringify(a));void 0!==a.success?0!=a.success&&$("#"+b+"Error").remove():$("#"+b+"Error").remove();if(!a.valid&&void 0!==a.fieldErrors)if(1<a.fieldErrors.loginName.length){for(var c=
"",d=0;d<a.fieldErrors.loginName.length;d++)c+=a.fieldErrors.loginName[d]+"<br>";addInlineError(b,c)}else 1==a.fieldErrors.loginName.length&&addInlineError(b,a.fieldErrors.loginName);void 0!==a.valid&&0==a.valid&&$("#"+b+"Error").remove()}})}
function getLanguagesForCountryAJAX(a,b){$.ajax({type:"GET",url:"/reg/account/language-list.action?struts.enableJSONValidation=true&country="+encodeURIComponent(a),success:function(c){c=jQuery.parseJSON(JSON.stringify(c));$("#"+b).html("");for(var d="",e=0;e<c.languages.length;e++)d+="<option value='"+c.languages[e].code+"'>"+c.languages[e].description+"</option>";1!=c.languages.length&&$("#"+b).html(d);$("#"+b).val(c.languages[0].code);c=c.languages[0].code+"_"+a;d=window.location.toString();-1<
d.indexOf("?")&&(d=d.substring(0,d.indexOf("?")));c=-1==d.indexOf("!input")?d.split(".action")[0]+"!input.action?request_locale="+c:d+"?request_locale="+c;$("#mainRegistrationForm").attr("action",c);$("#g-recaptcha-response").attr("name","");$("#recaptcha_response_field").attr("name","");$("#mainRegistrationForm").submit()}})}
function getStatesForCountryAJAX(a,b){$.ajax({type:"GET",url:"/util/provinces-list.action?struts.enableJSONValidation=true&country="+encodeURIComponent(a),success:function(a){a=jQuery.parseJSON(JSON.stringify(a));if(null==a.provinces)$("#stateRow").css("display","none");else{$("#"+b).html("");var d;d="<option value=''>-Select a State-</option>";for(var e=0;e<a.provinces.length;e++)d+="<option value='"+a.provinces[e].provinceCode+"'>"+a.provinces[e].name+"</option>";$("#"+b).html(d);$("#stateRow").css("display",
"block")}}})}
function validatePasswordAJAX(a,b,c){a=encodeURIComponent(a);""==b.toString()?$("#"+c+"Error").remove():$.ajax({type:"POST",url:"/reg/account/validate-password.action",data:"struts.enableJSONValidation=true&loginName="+a+"&password="+encodeURIComponent(b),success:function(a){a=jQuery.parseJSON(JSON.stringify(a));void 0!=$("#"+c+"Error")&&$("#"+c+"Error").remove();void 0!=a.fieldErrors&&(addInlineError(c,a.fieldErrors.password),$("#"+c).focus(),$("#pwHelpIcon").find(".caption, .captionLeft").css("display","block"),
$("#pwHelpIcon").mouseover(function(){$("#pwHelpIcon").find(".caption, .captionLeft").css("display","block")}),$("#pwHelpIcon").mouseout(function(){$("#pwHelpIcon").find(".caption, .captionLeft").css("display","none")}))}})}
function validatePasswordAJAXExternal(a,b,c){a=encodeURIComponent(a);""==b.toString()?$("#"+c+"Error").remove():$.ajax({type:"POST",url:"/reg/account/validate-password.action",data:"struts.enableJSONValidation=true&loginName="+a+"&password="+encodeURIComponent(b),success:function(a){a=jQuery.parseJSON(JSON.stringify(a));void 0!=$("#"+c+"Error")&&$("#"+c+"Error").remove();void 0!=a.fieldErrors&&(addInlineError(c,a.fieldErrors.password),$("#"+c).focus())}})}
function CamClientPassAndClose(a){CamClientActivity.passCredentialInfo(a);CamClientActivity.close()}function initFormFocus(){var a=$("input + label.errorRow:first");0<a.length?a.prev("input").select():$("input").each(function(a){if(""==$(this).val()&&"checkbox"!=$(this).attr("type"))return is_ie8_or_ie7?"signInInput_SignInID"!=$(this).attr("id")&&"account_loginNameField"!=$(this).attr("id")&&($(this).focus(),$(this).select()):($(this).focus(),$(this).select()),!1})}
function trackFormValidationErrors(a){var b=window.location.pathname,c=[],d=0;$(":input").map(function(){var b=$(this);if(!b.is(":hidden")){var e=b.attr("id")+":",g=!1;if(a[b.attr("id")]||a[b.attr("id")+"Field"])g=!0;if(a[b.attr("name")]||a[b.attr("name")+"Field"])g=!0;c[d++]=e+(g?"1":"0")}return null});c.sort();for(var e="",d=0;d<c.length;d++)0!=d&&(e+=","),e+=c[d];0<e.length&&_gaq.push(["_trackEvent","Form: "+b,"ValidationErrors",e])}
function trackFormSubmission(){_gaq.push(["_trackEvent","Form: "+window.location.pathname,"FormSubmissions"])}function setupTrackingFormBlurs(){var a=window.location.pathname;-1==a.indexOf("/login.action")&&$(":input").blur(function(){0<$(this).val().length&&_gaq.push(["_trackEvent","Form: "+a,"InputFieldExit",$(this).attr("name")])})}$(document).ready(function(){$(".optionButton").click(function(){$(this).find("form").submit();$(this).unbind("click")});initFormFocus()});
jQuery.fn.check=function(a){a=a||"on";return this.each(function(){switch(a){case "on":this.checked=!0;break;case "off":this.checked=!1;break;case "toggle":this.checked=!this.checked}})};
function validateAgeVerifyDocAJAX(a,b,c,d,e){$("#"+c+"Error").remove();b=encodeURIComponent(b);if(""!=b.toString()){var f=$("#identificationCardType").val();$.ajax({type:"POST",url:"/cam/account/mywallet/validate-age-verification-field!"+d+".action",data:"struts.enableJSONValidation=true&identificationCardType="+b+"&"+a+"="+e,success:function(b){b=jQuery.parseJSON(JSON.stringify(b));$("#"+c+"Error").remove();if(b.valid)"validateIdentificationCardType"==d?($("#ageVerifyDocumentGroup, #submitDocBtn").toggle(),
$("#ageVerifyDOBGroup, #submitDOBbtn").toggle(),"NEW_GERMAN_PASSPORT"==f?$("#ageVerificationImg").attr("class","ageVerImgPassportDOB"):"POST_2010_GERMAN_IDENTITY_CARD"==f?$("#ageVerificationImg").attr("class","ageVerImgNewIdDOB"):"PRE_2011_GERMAN_IDENTITY_CARD"==f&&$("#ageVerificationImg").attr("class","ageVerImgOldIdDOB")):"validateDob"==d?($("#ageVerifyDOBGroup, #submitDOBbtn").toggle(),$("#ageVerifyBlock1Group, #submitBlock1Btn").toggle(),"NEW_GERMAN_PASSPORT"==f?$("#ageVerificationImg").attr("class",
"ageVerImgPassportDocNo"):"POST_2010_GERMAN_IDENTITY_CARD"==f?$("#ageVerificationImg").attr("class","ageVerImgNewIdDocNo"):"PRE_2011_GERMAN_IDENTITY_CARD"==f&&$("#ageVerificationImg").attr("class","ageVerImgOldIdDocNo")):"validateIdNumber"==d?($("#ageVerifyBlock1Group, #submitBlock1Btn").toggle(),$("#ageVerifyBlock2Group, #submitBlock2Btn").toggle(),"NEW_GERMAN_PASSPORT"==f?$("#ageVerificationImg").attr("class","ageVerImgPassportConfirmDOB"):"POST_2010_GERMAN_IDENTITY_CARD"==f?$("#ageVerificationImg").attr("class",
"ageVerImgNewIdConfirmDOB"):"PRE_2011_GERMAN_IDENTITY_CARD"==f&&$("#ageVerificationImg").attr("class","ageVerImgOldIdConfirmDOB")):"validateDobBlock"==d?($("#ageVerifyBlock2Group, #submitBlock2Btn").toggle(),$("#ageVerifyBlock3Group, #submitBlock3Btn").toggle(),"NEW_GERMAN_PASSPORT"==f?$("#ageVerificationImg").attr("class","ageVerImgPassportDOE"):"POST_2010_GERMAN_IDENTITY_CARD"==f?$("#ageVerificationImg").attr("class","ageVerImgNewIdDOE"):"PRE_2011_GERMAN_IDENTITY_CARD"==f&&$("#ageVerificationImg").attr("class",
"ageVerImgOldIdDOE")):"validateExpirationDate"==d?($("#ageVerifyBlock3Group, #submitBlock3Btn").toggle(),$("#ageVerifyBlock4Group, #submitBlock4Btn").toggle(),"NEW_GERMAN_PASSPORT"==f?$("#ageVerificationImg").attr("class","ageVerImgPassportCheckSum"):"POST_2010_GERMAN_IDENTITY_CARD"==f?$("#ageVerificationImg").attr("class","ageVerImgNewIdCheckSum"):"PRE_2011_GERMAN_IDENTITY_CARD"==f&&$("#ageVerificationImg").attr("class","ageVerImgOldIdCheckSum")):"validateChecksum"==d&&$("#performAgeVerificationForm").submit();
else if(1<b.fieldErrors[a].length){for(var e="",h=0;h<b.fieldErrors[a].length;h++)e+=b.fieldErrors[a][h]+"<br>";addInlineError(c,e)}else 1==b.fieldErrors[a].length&&addInlineError(c,b.fieldErrors[a])}})}};
